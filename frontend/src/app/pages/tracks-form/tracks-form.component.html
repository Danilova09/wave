<app-centered-card title="Add Track">
  <form
    #f="ngForm"
    fxLayout="column"
    autocomplete="off"
    (ngSubmit)="onSubmit()"
  >
    <mat-form-field appearance="outline">
      <mat-label>Title</mat-label>
      <input
        type="text" name="title" autocomplete="track"
        required matInput ngModel #title="ngModel"
      />
      <mat-error *ngIf="title.touched && title.hasError('required')">
        Tile is required!
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Duration</mat-label>
      <input
        type="text" name="duration" autocomplete="current-Duration"
        required matInput ngModel #duration="ngModel">
      <mat-error *ngIf="duration.touched && duration.hasError('required')">
        Duration is required!
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Artists</mat-label>
      <mat-select name="artist" ngModel #artist="ngModel" required>
        <mat-option (click)=getAlbums(artist._id) [value]="artist._id" *ngFor="let artist of (artists | async)">{{ artist.name }}</mat-option>
      </mat-select>
      <mat-error *ngIf="artist.touched && artist.hasError('required')">
        Choose artist!
      </mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Albums</mat-label>
      <mat-select name="album" ngModel #album="ngModel" required>
        <mat-option  [value]="album._id" *ngFor="let album of (albums | async)">{{ album.title }}</mat-option>
      </mat-select>
      <mat-error *ngIf="album.touched && album.hasError('required')">
        Choose album!
      </mat-error>
    </mat-form-field>
    <button
      type="submit"
      mat-raised-button
      color="primary">ADD TRACK</button>
  </form>
</app-centered-card>
